<div class="panel panel-default">
    <h2 ng-click="showNewArticle=!showNewArticle" class="well"><span class="fa fa-book"></span> New Article</h2>
    <section ng-show="showNewArticle === true">
        <div class="panel-heading">
            <strong> <span class="fa fa-pencil"></span> Article Title</strong>
        </div>
        <div class="panel-body ng-scope">
            <h1><input type="text" ng-model="articleTitle" placeholder="Article Title"/></h1>
        </div>

        <div class="panel panel-default clearfix">
            <div class="panel-heading"><strong> <span class="fa fa-paint-brush"></span> Article Body</strong></div>
            <div class="panel-body">
                <div text-angular="" ng-model="articleText" class="ui-editor ng-isolate-scope ng-pristine ng-valid ta-root"></div>
                <textarea ng-show="showHtml" ta-bind="ta-bind" ng-model="articleText" class="ng-scope ng-isolate-scope ng-pristine ng-valid ta-bind ta-html ta-editor form-control ng-hide">
                </textarea>
            </div>
        </div>

        <div class="panel panel-default clearfix">
            <div class="panel-heading" ng-click="showMedia = !showMedia"><strong> <span class="fa fa-photo"></span> Choose Attachments</strong></div>
            <div class="panel-body" ng-show="showMedia === true">
                <div class="col-xs-4 well" ng-repeat="image in api.show.media">{{image.mediaURL}} <img ng-click="addContentMedia($parent.api.show.media, image.$id, $parent.media)" ng-src="{{image.mediaURL}}" width="100%"> </div>
            </div>
        </div>

        <div class="well clearfix">
            <button class="btn btn-behance col-xs-12" ng-click="saveArticle(articleTitle, articleText, media)"><h3><span class="fa fa-cloud-upload"></span> Save New Article</h3></button>
        </div>
    </section>

</div>
<h2 class="well"><span class="fa fa-book"></span> Articles</h2>
<section>
    <div>
        <div ng-repeat="article in api.show.articles" class="panel panel-default">
            <div class="panel-heading" ng-click="editTitle = true; ">
                <div ng-hide="editTitle===true">{{article.title}}</div>
                <input ng-show="editTitle===true" ng-model="article.title" ng-blur="updateArticleTitle(article.articleURL, article.$id,article.title);editTitle=false;">
            </div>
            <div class="panel-body">
                <div text-angular="" ng-init="html = article.body;" ng-model="article.body" class="ui-editor ng-isolate-scope ng-pristine ng-valid ta-root"></div>
                <textarea ng-init="html = article.body" ng-show="showHtml" ta-bind="ta-bind" ng-model="article.body" class="ng-scope ng-isolate-scope ng-pristine ng-valid ta-bind ta-html ta-editor form-control ng-hide">
                </textarea>
            </div>
            <div class="panel-footer" ng-init="removeArticle = false;">
                <p><div>ID:</div><pre>{{article.$id}}</pre></p>
                <div>URL:</div><pre><code>{{article.articleURL}}</code></pre>
                <div class="clearfix panel panel-default">
                    <div class="col-xs-3 panel-body" ng-repeat="media in article.media" ng-click="showOptions = true">
                        <div ng-show="showOptions" ng-click="$parent.removeContentMedia($parent.article.media, media);">Remove Image</div>
                        <img ng-src="{{$parent.api.show.media.$getRecord(media).mediaURL}}" width="100%">
                        <div ng-if="($index+1) % 4 === 0" class="clearfix"></div>
                    </div>
                </div>
                <div class="panel panel-default clearfix">
                    <h3 class="panel-heading" ng-click="addMoreMedia = !addMoreMedia"><span class="fa fa-photo"></span> Add more media</h3>
                    <div class="col-xs-2 panel-body" ng-show="addMoreMedia===true" ng-repeat="image in api.show.media">
                        <img ng-click="$parent.addContentMedia($parent.api.show.media, image.$id, $parent.$parent.media)" ng-src="{{image.mediaURL}}" width="100%" style="float:left">
                    </div>
                    <div ng-if="($index+1) % 5 === 0" class="clearfix"></div>
                </div>
                <div class="clearfix">
                    <button class="btn btn-behance col-xs-12 clearfix" ng-click="api.updateArticle(article.$id, article.body, $parent.media)"><h3><span class="fa fa-send"></span> Update Article</h3></button>
                    <hr class="col-xs-12">
                    <div class="panel panel-default pull-right">
                        <div ng-show="!removeArticle" ng-click="removeArticle = true" class="panel-heading"><span class="fa fa-remove"></span> Remove Article</div>
                        <div ng-show="removeArticle">
                            <a ng-click="api.removeArticle(article.articleURL, article.$id)" ><span class="well">Yes, remove this article.</span></a>
                            <a ng-click="removeArticle = false"class="btn btn-default" role="button">Cancel</a>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</section>